(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b242cd64"],{b0c0:function(e,t,c){var o=c("83ab"),a=c("9bf2").f,r=Function.prototype,n=r.toString,l=/^\s*function ([^ (]*)/,d="name";o&&!(d in r)&&a(r,d,{configurable:!0,get:function(){try{return n.call(this).match(l)[1]}catch(e){return""}}})},da25:function(e,t,c){"use strict";c.r(t);c("b0c0");var o=c("7a23"),a={class:"container py-3"},r=Object(o["createVNode"])("h1",null,"訂單列表",-1),n={class:"d-flex justify-content-end"},l={class:"table"},d=Object(o["createVNode"])("thead",null,[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",{scope:"col"},"訂單編號"),Object(o["createVNode"])("th",{scope:"col"},"訂購人姓名"),Object(o["createVNode"])("th",{scope:"col"},"訂購人 Email"),Object(o["createVNode"])("th",{scope:"col"},"訂購日期"),Object(o["createVNode"])("th",{scope:"col"},"是否付款"),Object(o["createVNode"])("th",{scope:"col"})])],-1);function i(e,t,c,i,s,b){var u=Object(o["resolveComponent"])("loading"),p=Object(o["resolveComponent"])("pagination"),O=Object(o["resolveComponent"])("editModal");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(u,{active:s.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return s.isLoading=e})},null,8,["active"]),Object(o["createVNode"])("div",a,[r,Object(o["createVNode"])("div",n,[s.orderList.length>=2?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,class:"btn btn-danger",onClick:t[2]||(t[2]=function(){return b.deleteAll&&b.deleteAll.apply(b,arguments)})},"刪除所有訂單")):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("table",l,[d,Object(o["createVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(s.orderList,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:e.id},[Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.id),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.user.name),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.user.email),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(new Date(1e3*e.create_at).getFullYear())+"/"+Object(o["toDisplayString"])(new Date(1e3*e.create_at).getMonth()+1)+"/"+Object(o["toDisplayString"])(new Date(1e3*e.create_at).getDate()),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.is_paid?"已付款":"未付款"),1),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("button",{class:"btn btn-primary me-2",type:"button",onClick:function(t){return b.editOrder(e)}},"編輯",8,["onClick"]),Object(o["createVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:function(t){return b.deleteOrder(e.id)}},"刪除",8,["onClick"])])])})),128))])]),Object(o["createVNode"])(p,{pages:s.pagination,onGetList:b.getOrder},null,8,["pages","onGetList"]),Object(o["createVNode"])(O,{ref:"editModal","temp-order":s.tempOrder,onGetOrder:b.getOrder},null,8,["temp-order","onGetOrder"])])],64)}c("99af");var s=c("1799"),b={class:"modal fade",id:"modal",ref:"modal"},u={class:"modal-dialog"},p={class:"modal-content"},O=Object(o["createVNode"])("div",{class:"modal-header"},[Object(o["createVNode"])("h5",{class:"modal-title"},"訂單編輯"),Object(o["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),m={class:"modal-body"},j={class:"mb-3"},h=Object(o["createVNode"])("label",{for:"orderId",class:"form-label"},"訂單編號",-1),f={class:"accordion accordion-flush",id:"orderAccordion"},V={class:"accordion-item"},g=Object(o["createVNode"])("h2",{class:"accordion-header",id:"flush-headingOne"},[Object(o["createVNode"])("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"false","aria-controls":"flush-collapseOne"}," 訂購人資訊 ")],-1),N={id:"flush-collapseOne",class:"accordion-collapse collapse","aria-labelledby":"flush-headingOne","data-bs-parent":"#orderAccordion"},v={class:"accordion-body"},y={class:"mb-3"},x=Object(o["createVNode"])("label",{for:"orderName",class:"form-label"},"訂單人姓名",-1),k={class:"mb-3"},w=Object(o["createVNode"])("label",{for:"email",class:"form-label"},"訂單人Email",-1),L={class:"mb-3"},D=Object(o["createVNode"])("label",{for:"tel",class:"form-label"},"訂單人電話",-1),M={class:"mb-3"},C=Object(o["createVNode"])("label",{for:"address",class:"form-label"},"訂單人地址",-1),T={class:"mb-3"},B=Object(o["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1),S={class:"accordion-item"},U=Object(o["createVNode"])("h2",{class:"accordion-header",id:"flush-headingTwo"},[Object(o["createVNode"])("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseTwo","aria-expanded":"false","aria-controls":"flush-collapseTwo"}," 訂單資訊 ")],-1),A={id:"flush-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"flush-headingTwo","data-bs-parent":"#orderAccordion"},$={class:"accordion-body"},_={class:"mb-3"},F=Object(o["createVNode"])("label",{for:"total",class:"form-label"},[Object(o["createTextVNode"])("訂單總額 "),Object(o["createVNode"])("small",{class:"text-danger"},"*必填")],-1),G={class:"form-check"},J=Object(o["createVNode"])("label",{class:"form-check-label",for:"isPaid"}," 是否付款 ",-1),E={class:"modal-footer"},I=Object(o["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function P(e,t,c,a,r,n){var l=Object(o["resolveComponent"])("loading");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(l,{active:r.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return r.isLoading=e})},null,8,["active"]),Object(o["createVNode"])("div",b,[Object(o["createVNode"])("div",u,[Object(o["createVNode"])("div",p,[O,Object(o["createVNode"])("div",m,[Object(o["createVNode"])("div",j,[h,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"orderId",disabled:"","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.temp.id=e})},null,512),[[o["vModelText"],r.temp.id]])]),Object(o["createVNode"])("div",f,[Object(o["createVNode"])("div",V,[g,Object(o["createVNode"])("div",N,[Object(o["createVNode"])("div",v,[Object(o["createVNode"])("div",y,[x,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"orderName","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.temp.user.name=e})},null,512),[[o["vModelText"],r.temp.user.name]])]),Object(o["createVNode"])("div",k,[w,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"email","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.temp.user.email=e})},null,512),[[o["vModelText"],r.temp.user.email]])]),Object(o["createVNode"])("div",L,[D,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"tel",class:"form-control",id:"tel","onUpdate:modelValue":t[5]||(t[5]=function(e){return r.temp.user.tel=e})},null,512),[[o["vModelText"],r.temp.user.tel]])]),Object(o["createVNode"])("div",M,[C,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":t[6]||(t[6]=function(e){return r.temp.user.address=e})},null,512),[[o["vModelText"],r.temp.user.address]])]),Object(o["createVNode"])("div",T,[B,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"message","onUpdate:modelValue":t[7]||(t[7]=function(e){return r.temp.message=e}),disabled:""},null,512),[[o["vModelText"],r.temp.message]])])])])]),Object(o["createVNode"])("div",S,[U,Object(o["createVNode"])("div",A,[Object(o["createVNode"])("div",$,[Object(o["createVNode"])("div",_,[F,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"number",class:"form-control",id:"total","onUpdate:modelValue":t[8]||(t[8]=function(e){return r.temp.total=e})},null,512),[[o["vModelText"],r.temp.total,void 0,{number:!0}]])]),Object(o["createVNode"])("div",G,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"isPaid","onUpdate:modelValue":t[9]||(t[9]=function(e){return r.temp.is_paid=e})},null,512),[[o["vModelCheckbox"],r.temp.is_paid]]),J])])])])])]),Object(o["createVNode"])("div",E,[I,Object(o["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[10]||(t[10]=function(){return n.editOrder&&n.editOrder.apply(n,arguments)})},"編輯")])])])],512)],64)}var Y=c("6cfa"),q=c("1940"),z=c.n(q),H={data:function(){return{modal:"",temp:{user:{}},isLoading:!1}},mixins:[Y["a"]],emits:["getOrder"],props:["tempOrder"],methods:{editOrder:function(){var e=this;if(this.isLoading=!0,!this.temp.total)return this.isLoading=!1,void z()({text:"必填項目要填寫唷！",icon:"error",button:!1,timer:1500});var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/admin/order/").concat(this.temp.id);this.$http.put(t,{data:this.temp}).then((function(t){t.data.success&&(e.isLoading=!1,z()({text:"編輯成功",icon:"success",button:!1,timer:1500}),e.hideModal(),e.$emit("getOrder"))})).catch((function(e){console.log(e)}))}},watch:{tempOrder:function(){this.temp=this.tempOrder}}};H.render=P;var K=H,Q={data:function(){return{orderList:[],pagination:[],tempOrder:[],isLoading:!1}},components:{pagination:s["a"],editModal:K},methods:{getOrder:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/admin/orders?page=").concat(t);this.$http.get(c).then((function(t){t.data.success&&(e.isLoading=!1,e.orderList=t.data.orders,e.pagination=t.data.pagination)})).catch((function(e){console.log(e)}))},deleteOrder:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/admin/order/").concat(e);this.$http.delete(c).then((function(e){console.log(e),e.data.success&&(t.isLoading=!1,z()({text:"刪除成功",button:!1,timer:1500}),t.getOrder())})).catch((function(e){console.log(e)}))},deleteAll:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/admin/orders/all");this.$http.delete(t).then((function(t){console.log(t),t.data.success&&(e.isLoading=!1,z()({text:"刪除所有訂單成功",button:!1,timer:1500}),e.getOrder())})).catch((function(e){console.log(e)}))},editOrder:function(e){this.tempOrder=JSON.parse(JSON.stringify(e)),this.$refs.editModal.openModal()}},created:function(){this.getOrder()}};Q.render=i;t["default"]=Q}}]);
//# sourceMappingURL=chunk-b242cd64.5cbb7c79.js.map