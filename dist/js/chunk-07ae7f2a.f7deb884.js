(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07ae7f2a"],{"057f":function(e,t,c){var o=c("fc6a"),n=c("241c").f,a={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(e){try{return n(e)}catch(t){return r.slice()}};e.exports.f=function(e){return r&&"[object Window]"==a.call(e)?i(e):n(o(e))}},"0835":function(e,t,c){"use strict";c("9da1")},"746f":function(e,t,c){var o=c("428f"),n=c("5135"),a=c("e538"),r=c("9bf2").f;e.exports=function(e){var t=o.Symbol||(o.Symbol={});n(t,e)||r(t,e,{value:a.f(e)})}},"9da1":function(e,t,c){},a4d3:function(e,t,c){"use strict";var o=c("23e7"),n=c("da84"),a=c("d066"),r=c("c430"),i=c("83ab"),l=c("4930"),s=c("fdbf"),d=c("d039"),u=c("5135"),b=c("e8b5"),p=c("861d"),f=c("825a"),m=c("7b0b"),h=c("fc6a"),O=c("c04e"),g=c("5c6c"),j=c("7c73"),v=c("df75"),y=c("241c"),N=c("057f"),V=c("7418"),k=c("06cf"),w=c("9bf2"),x=c("d1e7"),U=c("9112"),P=c("6eeb"),S=c("5692"),B=c("f772"),M=c("d012"),L=c("90e3"),C=c("b622"),T=c("e538"),D=c("746f"),$=c("d44e"),_=c("69f3"),F=c("b727").forEach,J=B("hidden"),E="Symbol",I="prototype",G=C("toPrimitive"),A=_.set,q=_.getterFor(E),Q=Object[I],W=n.Symbol,z=a("JSON","stringify"),H=k.f,K=w.f,R=N.f,X=x.f,Y=S("symbols"),Z=S("op-symbols"),ee=S("string-to-symbol-registry"),te=S("symbol-to-string-registry"),ce=S("wks"),oe=n.QObject,ne=!oe||!oe[I]||!oe[I].findChild,ae=i&&d((function(){return 7!=j(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(e,t,c){var o=H(Q,t);o&&delete Q[t],K(e,t,c),o&&e!==Q&&K(Q,t,o)}:K,re=function(e,t){var c=Y[e]=j(W[I]);return A(c,{type:E,tag:e,description:t}),i||(c.description=t),c},ie=s?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof W},le=function(e,t,c){e===Q&&le(Z,t,c),f(e);var o=O(t,!0);return f(c),u(Y,o)?(c.enumerable?(u(e,J)&&e[J][o]&&(e[J][o]=!1),c=j(c,{enumerable:g(0,!1)})):(u(e,J)||K(e,J,g(1,{})),e[J][o]=!0),ae(e,o,c)):K(e,o,c)},se=function(e,t){f(e);var c=h(t),o=v(c).concat(fe(c));return F(o,(function(t){i&&!ue.call(c,t)||le(e,t,c[t])})),e},de=function(e,t){return void 0===t?j(e):se(j(e),t)},ue=function(e){var t=O(e,!0),c=X.call(this,t);return!(this===Q&&u(Y,t)&&!u(Z,t))&&(!(c||!u(this,t)||!u(Y,t)||u(this,J)&&this[J][t])||c)},be=function(e,t){var c=h(e),o=O(t,!0);if(c!==Q||!u(Y,o)||u(Z,o)){var n=H(c,o);return!n||!u(Y,o)||u(c,J)&&c[J][o]||(n.enumerable=!0),n}},pe=function(e){var t=R(h(e)),c=[];return F(t,(function(e){u(Y,e)||u(M,e)||c.push(e)})),c},fe=function(e){var t=e===Q,c=R(t?Z:h(e)),o=[];return F(c,(function(e){!u(Y,e)||t&&!u(Q,e)||o.push(Y[e])})),o};if(l||(W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=L(e),c=function(e){this===Q&&c.call(Z,e),u(this,J)&&u(this[J],t)&&(this[J][t]=!1),ae(this,t,g(1,e))};return i&&ne&&ae(Q,t,{configurable:!0,set:c}),re(t,e)},P(W[I],"toString",(function(){return q(this).tag})),P(W,"withoutSetter",(function(e){return re(L(e),e)})),x.f=ue,w.f=le,k.f=be,y.f=N.f=pe,V.f=fe,T.f=function(e){return re(C(e),e)},i&&(K(W[I],"description",{configurable:!0,get:function(){return q(this).description}}),r||P(Q,"propertyIsEnumerable",ue,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:W}),F(v(ce),(function(e){D(e)})),o({target:E,stat:!0,forced:!l},{for:function(e){var t=String(e);if(u(ee,t))return ee[t];var c=W(t);return ee[t]=c,te[c]=t,c},keyFor:function(e){if(!ie(e))throw TypeError(e+" is not a symbol");if(u(te,e))return te[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),o({target:"Object",stat:!0,forced:!l,sham:!i},{create:de,defineProperty:le,defineProperties:se,getOwnPropertyDescriptor:be}),o({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:pe,getOwnPropertySymbols:fe}),o({target:"Object",stat:!0,forced:d((function(){V.f(1)}))},{getOwnPropertySymbols:function(e){return V.f(m(e))}}),z){var me=!l||d((function(){var e=W();return"[null]"!=z([e])||"{}"!=z({a:e})||"{}"!=z(Object(e))}));o({target:"JSON",stat:!0,forced:me},{stringify:function(e,t,c){var o,n=[e],a=1;while(arguments.length>a)n.push(arguments[a++]);if(o=t,(p(t)||void 0!==e)&&!ie(e))return b(t)||(t=function(e,t){if("function"==typeof o&&(t=o.call(this,e,t)),!ie(t))return t}),n[1]=t,z.apply(null,n)}})}W[I][G]||U(W[I],G,W[I].valueOf),$(W,E),M[J]=!0},b727:function(e,t,c){var o=c("0366"),n=c("44ad"),a=c("7b0b"),r=c("50c4"),i=c("65f0"),l=[].push,s=function(e){var t=1==e,c=2==e,s=3==e,d=4==e,u=6==e,b=7==e,p=5==e||u;return function(f,m,h,O){for(var g,j,v=a(f),y=n(v),N=o(m,h,3),V=r(y.length),k=0,w=O||i,x=t?w(f,V):c||b?w(f,0):void 0;V>k;k++)if((p||k in y)&&(g=y[k],j=N(g,k,v),e))if(t)x[k]=j;else if(j)switch(e){case 3:return!0;case 5:return g;case 6:return k;case 2:l.call(x,g)}else switch(e){case 4:return!1;case 7:l.call(x,g)}return u?-1:s||d?d:x}};e.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterOut:s(7)}},d416:function(e,t,c){"use strict";c.r(t);var o=c("7a23"),n={class:"container py-3"},a=Object(o["createVNode"])("h1",null,"商品列表",-1),r={class:"d-flex justify-content-end"},i={class:"table"},l=Object(o["createVNode"])("thead",null,[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",{width:"20%"},"商品圖片"),Object(o["createVNode"])("th",{scope:"col"},"商品名稱"),Object(o["createVNode"])("th",{scope:"col"},"商品售價"),Object(o["createVNode"])("th",{scope:"col"},"是否啟用"),Object(o["createVNode"])("th",{scope:"col"})])],-1),s={class:"image"};function d(e,t,c,d,u,b){var p=Object(o["resolveComponent"])("loading"),f=Object(o["resolveComponent"])("pagination"),m=Object(o["resolveComponent"])("updateModal");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(p,{active:u.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return u.isLoading=e})},null,8,["active"]),Object(o["createVNode"])("div",n,[a,Object(o["createVNode"])("div",r,[Object(o["createVNode"])("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=function(e){return b.updateModal("new")})},"新增商品")]),Object(o["createVNode"])("table",i,[l,Object(o["createVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(u.productList,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:e.id,class:"align-middle"},[Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",s,[Object(o["createVNode"])("img",{src:e.imageUrl,alt:"pic",class:"img-fluid"},null,8,["src"])])]),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.title),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.price),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.is_enabled?"啟用":"未啟用"),1),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-primary me-2",onClick:function(t){return b.updateModal("edit",e)}},"編輯",8,["onClick"]),Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return b.deleteProduct(e.id,u.pagination.current_page)}},"刪除",8,["onClick"])])])})),128))])]),Object(o["createVNode"])(f,{pages:u.pagination,onGetList:b.getProduct},null,8,["pages","onGetList"]),Object(o["createVNode"])(m,{ref:"updateModal","temp-product":u.tempProduct,"is-new":u.isNew,onGetProduct:b.getProduct},null,8,["temp-product","is-new","onGetProduct"])])],64)}c("99af");var u=c("1799"),b=(c("a4d3"),c("e01a"),{class:"modal fade",id:"modal",ref:"updateModal"}),p={class:"modal-dialog"},f={class:"modal-content"},m={class:"modal-header"},h={key:0,class:"modal-title"},O={key:1,class:"modal-title"},g=Object(o["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),j={class:"modal-body"},v={class:"mb-3"},y=Object(o["createVNode"])("label",{for:"name",class:"form-label"},[Object(o["createTextVNode"])("商品名稱 "),Object(o["createVNode"])("small",{class:"text-danger"},"*必填")],-1),N={class:"row mb-3"},V={class:"col"},k=Object(o["createVNode"])("label",{for:"category",class:"form-label"},[Object(o["createTextVNode"])("商品種類 "),Object(o["createVNode"])("small",{class:"text-danger"},"*必填")],-1),w={class:"col"},x=Object(o["createVNode"])("label",{for:"unit",class:"form-label"},[Object(o["createTextVNode"])("商品單位 "),Object(o["createVNode"])("small",{class:"text-danger"},"*必填")],-1),U={class:"row mb-3"},P={class:"col"},S=Object(o["createVNode"])("label",{for:"price",class:"form-label"},[Object(o["createTextVNode"])("商品售價 "),Object(o["createVNode"])("small",{class:"text-danger"},"*必填")],-1),B={class:"col"},M=Object(o["createVNode"])("label",{for:"origin_price",class:"form-label"},[Object(o["createTextVNode"])("商品原價 "),Object(o["createVNode"])("small",{class:"text-danger"},"*必填")],-1),L={class:"mb-3"},C=Object(o["createVNode"])("label",{for:"content",class:"form-label"},"商品內容",-1),T={class:"mb-3"},D=Object(o["createVNode"])("label",{for:"description",class:"form-label"},"商品描述",-1),$={class:"mb-3"},_=Object(o["createVNode"])("label",{for:"imageUrl",class:"form-label"},"商品圖片",-1),F={class:"input-group"},J=Object(o["createVNode"])("input",{type:"file",class:"form-control",id:"imageUrl"},null,-1),E={class:"mb-3"},I=Object(o["createVNode"])("div",{class:"mb-1"},"多圖新增",-1),G={key:0},A=Object(o["createVNode"])("label",{for:"imageUrl",class:"form-label"},"圖片網址",-1),q={class:"input-group"},Q={key:0},W={key:1},z={key:1},H={class:"form-check"},K=Object(o["createVNode"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),R={class:"modal-footer"},X=Object(o["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function Y(e,t,c,n,a,r){var i=Object(o["resolveComponent"])("loading");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(i,{active:a.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return a.isLoading=e})},null,8,["active"]),Object(o["createVNode"])("div",b,[Object(o["createVNode"])("div",p,[Object(o["createVNode"])("div",f,[Object(o["createVNode"])("div",m,[c.isNew?(Object(o["openBlock"])(),Object(o["createBlock"])("h5",h,"新增商品")):(Object(o["openBlock"])(),Object(o["createBlock"])("h5",O,"編輯商品")),g]),Object(o["createVNode"])("div",j,[Object(o["createVNode"])("div",v,[y,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.temp.title=e})},null,512),[[o["vModelText"],a.temp.title]])]),Object(o["createVNode"])("div",N,[Object(o["createVNode"])("div",V,[k,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.temp.category=e})},null,512),[[o["vModelText"],a.temp.category]])]),Object(o["createVNode"])("div",w,[x,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.temp.unit=e})},null,512),[[o["vModelText"],a.temp.unit]])])]),Object(o["createVNode"])("div",U,[Object(o["createVNode"])("div",P,[S,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"number",class:"form-control",id:"price","onUpdate:modelValue":t[5]||(t[5]=function(e){return a.temp.price=e})},null,512),[[o["vModelText"],a.temp.price,void 0,{number:!0}]])]),Object(o["createVNode"])("div",B,[M,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"origin_price","onUpdate:modelValue":t[6]||(t[6]=function(e){return a.temp.origin_price=e})},null,512),[[o["vModelText"],a.temp.origin_price,void 0,{number:!0}]])])]),Object(o["createVNode"])("div",L,[C,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":t[7]||(t[7]=function(e){return a.temp.content=e})},null,512),[[o["vModelText"],a.temp.content]])]),Object(o["createVNode"])("div",T,[D,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":t[8]||(t[8]=function(e){return a.temp.description=e})},null,512),[[o["vModelText"],a.temp.description]])]),Object(o["createVNode"])("div",$,[_,Object(o["createVNode"])("div",F,[J,Object(o["createVNode"])("button",{class:"btn btn-primary",type:"button",onClick:t[9]||(t[9]=function(){return r.upload&&r.upload.apply(r,arguments)})},"上傳檔案")]),a.temp.imageUrl?(Object(o["openBlock"])(),Object(o["createBlock"])("img",{key:0,src:a.temp.imageUrl,alt:"imageUrl",class:"img-fiuld mt-2 w-100"},null,8,["src"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",E,[I,Array.isArray(a.temp.imagesUrl)?(Object(o["openBlock"])(),Object(o["createBlock"])("div",G,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.temp.imagesUrl,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"mb-1",key:t},[A,Object(o["createVNode"])("div",q,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"imageUrl",placeholder:"請輸入圖片連結","onUpdate:modelValue":function(e){return a.temp.imagesUrl[t]=e}},null,8,["onUpdate:modelValue"]),[[o["vModelText"],a.temp.imagesUrl[t]]])]),a.temp.imagesUrl[t]?(Object(o["openBlock"])(),Object(o["createBlock"])("img",{key:0,src:e,alt:"imageUrl",class:"img-fiuld mt-2 w-100"},null,8,["src"])):Object(o["createCommentVNode"])("",!0)])})),128)),!a.temp.imagesUrl.length||a.temp.imagesUrl[a.temp.imagesUrl.length-1]?(Object(o["openBlock"])(),Object(o["createBlock"])("div",Q,[Object(o["createVNode"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[10]||(t[10]=function(e){return a.temp.imagesUrl.push("")}),type:"button"},"新增圖片")])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",W,[Object(o["createVNode"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:t[11]||(t[11]=function(e){return a.temp.imagesUrl.pop()}),type:"button"},"刪除圖片")]))])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",z,[Object(o["createVNode"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[12]||(t[12]=function(){return r.createImage&&r.createImage.apply(r,arguments)}),type:"button"},"新增圖片")]))]),Object(o["createVNode"])("div",H,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:"is_enabled","onUpdate:modelValue":t[13]||(t[13]=function(e){return a.temp.is_enabled=e}),"true-value":"1","false-value":"0"},null,512),[[o["vModelCheckbox"],a.temp.is_enabled]]),K])]),Object(o["createVNode"])("div",R,[X,Object(o["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[14]||(t[14]=function(){return r.updateProduct&&r.updateProduct.apply(r,arguments)})},"編輯")])])])],512)],64)}var Z=c("7c2b"),ee=c.n(Z),te=c("1940"),ce=c.n(te),oe={data:function(){return{modal:"",temp:{imagesUrl:[]},isLoading:!1}},emits:["getProduct"],props:["tempProduct","isNew"],methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()},updateProduct:function(){var e=this;if(this.isLoading=!0,!this.temp.title||!this.temp.category||!this.temp.origin_price||!this.temp.price||!this.temp.unit)return this.isLoading=!1,void ce()({text:"必填項目都要填寫唷！",icon:"error",button:!1,timer:1500});if(this.isNew){var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/admin/product");this.$http.post(t,{data:this.temp}).then((function(t){t.data.success&&(e.isLoading=!1,ce()({text:"新增成功",icon:"success",button:!1,timer:1500}),e.hideModal(),e.$emit("getProduct"))})).catch((function(e){console.log(e)}))}else{var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/admin/product/").concat(this.temp.id);this.$http.put(c,{data:this.temp}).then((function(t){t.data.success&&(e.isLoading=!1,ce()({text:"編輯成功",icon:"success",button:!1,timer:1500}),e.hideModal(),e.$emit("getProduct"))})).catch((function(e){console.log(e)}))}},upload:function(){var e=this;this.isLoading=!0;var t=document.querySelector("#imageUrl"),c=t.files[0],o=new FormData;o.append("file-to-upload",c);var n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/admin/upload");this.$http.post(n,o).then((function(c){e.isLoading=!1,e.temp.imageUrl=c.data.imageUrl,t.value=""})).catch((function(e){console.log(e)}))},createImage:function(){this.temp.imagesUrl=[],this.temp.imagesUrl.push("")}},mounted:function(){this.modal=new ee.a(this.$refs.updateModal,{backdrop:"static"})},watch:{tempProduct:function(){this.temp=this.tempProduct}}};oe.render=Y;var ne=oe,ae={data:function(){return{productList:[],pagination:[],tempProduct:[],isNew:!0,isLoading:!1}},components:{pagination:u["a"],updateModal:ne},methods:{getProduct:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/admin/products?page=").concat(t);this.$http.get(c).then((function(t){t.data.success&&(e.isLoading=!1,e.productList=t.data.products,e.pagination=t.data.pagination)})).catch((function(e){console.log(e)}))},deleteProduct:function(e,t){var c=this;this.isLoading=!0;var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/admin/product/").concat(e);this.$http.delete(o).then((function(e){e.data.success&&(c.isLoading=!1,ce()({text:"刪除成功",button:!1,timer:1500}),c.getProduct(t))})).catch((function(e){console.log(e)}))},updateModal:function(e,t){"edit"===e?(this.isNew=!1,this.tempProduct=JSON.parse(JSON.stringify(t)),this.$refs.updateModal.openModal()):"new"===e&&(this.isNew=!0,this.tempProduct={imagesUrl:[]},this.$refs.updateModal.openModal())}},created:function(){this.getProduct()}};c("0835");ae.render=d;t["default"]=ae},e01a:function(e,t,c){"use strict";var o=c("23e7"),n=c("83ab"),a=c("da84"),r=c("5135"),i=c("861d"),l=c("9bf2").f,s=c("e893"),d=a.Symbol;if(n&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},b=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof b?new d(e):void 0===e?d():d(e);return""===e&&(u[t]=!0),t};s(b,d);var p=b.prototype=d.prototype;p.constructor=b;var f=p.toString,m="Symbol(test)"==String(d("test")),h=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var e=i(this)?this.valueOf():this,t=f.call(e);if(r(u,e))return"";var c=m?t.slice(7,-1):t.replace(h,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:b})}},e538:function(e,t,c){var o=c("b622");t.f=o}}]);
//# sourceMappingURL=chunk-07ae7f2a.f7deb884.js.map